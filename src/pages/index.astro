---
const products = [
  {
    id: "set-white",
    name: "Lace Bra & Panty Set",
    price: 499,
    image: "/images/set-white.png",
    colors: ["White", "Black"],
    sizes: ["75B", "80B", "85B", "90B", "95B"],
    defaultColor: "White",
  },
  {
    id: "set-black",
    name: "Classic Black Lace Set",
    price: 399,
    image: "/images/set-black.png",
    colors: ["Black", "White"],
    sizes: ["75B", "80B", "85B", "90B", "95B"],
    defaultColor: "Black",
  },
];

const WHATSAPP_LINK =
  "https://wa.me/4792928373?text=Hi%20I%20have%20a%20question%20about%20your%20products";
---

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Amicbridge — Women’s Underwear</title>

  <style>
    :root {
      --border:#e5e5e5;
      --text:#111;
      --muted:#666;
      --bg:#fafafa;
    }

    body {
      margin:0;
      font-family: system-ui, sans-serif;
      background:var(--bg);
      color:var(--text);
    }

    header {
      padding:20px 40px;
      border-bottom:1px solid var(--border);
      display:flex;
      justify-content:space-between;
      align-items:center;
    }

    header h1 {
      margin:0;
      font-size:18px;
      letter-spacing:2px;
      text-transform:uppercase;
    }

    header a {
      text-decoration:none;
      color:#111;
      border:1px solid #111;
      padding:8px 12px;
      font-size:14px;
      margin-left:10px;
    }

    main {
      max-width:1200px;
      margin:0 auto;
      padding:40px;
    }

    .products {
      display:grid;
      grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
      gap:30px;
    }

    .product {
      background:#fff;
      border:1px solid var(--border);
      padding:16px;
      display:flex;
      flex-direction:column;
      gap:12px;
    }

    .product img {
      width:100%;
      height:360px;
      object-fit:cover;
      background:#f0f0f0;
      border:1px solid var(--border);
    }

    .row {
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
    }

    .price {
      font-weight:600;
    }

    .label {
      font-size:13px;
      color:var(--muted);
      text-transform:uppercase;
      margin:8px 0 6px;
    }

    .grid {
      display:grid;
      grid-template-columns: repeat(2, 1fr);
      gap:10px;
    }

    .btn-option {
      padding:12px;
      border:1px solid var(--border);
      background:#fff;
      cursor:pointer;
    }

    .btn-option.active {
      border-color:#111;
    }

    .qty {
      display:grid;
      grid-template-columns: 40px 60px 40px;
      border:1px solid var(--border);
    }

    .qty button {
      background:#fff;
      border:none;
      cursor:pointer;
      font-size:18px;
    }

    .qty div {
      display:flex;
      align-items:center;
      justify-content:center;
      border-left:1px solid var(--border);
      border-right:1px solid var(--border);
    }

    .actions {
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      margin-top:10px;
    }

    .btn {
      padding:12px;
      border:1px solid #111;
      cursor:pointer;
      font-size:14px;
    }

    .btn.primary {
      background:#111;
      color:#fff;
    }

    .btn.secondary {
      background:#fff;
    }

    .message {
      font-size:12px;
      color:#1a7f37;
    }

    .contact {
      margin-top:60px;
      padding:30px;
      border:1px solid var(--border);
      background:#fff;
    }

    .contact a {
      color:#111;
      text-decoration:none;
      border-bottom:1px solid #111;
    }

    /* Floating WhatsApp button */
    .whatsapp-float {
      position:fixed;
      bottom:20px;
      right:20px;
      background:#25D366;
      color:#fff;
      padding:14px 18px;
      border-radius:999px;
      text-decoration:none;
      font-weight:600;
      box-shadow:0 6px 16px rgba(0,0,0,0.2);
    }
  </style>
</head>

<body>
  <header>
    <h1>Amicbridge</h1>
    <div>
      Cart: <strong><span id="cartCount">0</span></strong>
      <a href="/checkout/">Checkout</a>
    </div>
  </header>

  <main>
    <section class="products">
      {products.map(p => (
        <div class="product" data-id={p.id} data-price={p.price}>
          <img src={p.image} alt={p.name} />

          <div class="row">
            <h2>{p.name}</h2>
            <div class="price">{p.price} NOK</div>
          </div>

          <div>
            <div class="label">Size (EU)</div>
            <div class="grid sizes">
              {p.sizes.map(s => (
                <button class="btn-option" data-size={s}>{s}</button>
              ))}
            </div>
          </div>

          <div>
            <div class="label">Color</div>
            <div class="grid colors">
              {p.colors.map(c => (
                <button class={`btn-option ${c === p.defaultColor ? "active" : ""}`} data-color={c}>{c}</button>
              ))}
            </div>
          </div>

          <div class="row">
            <div>
              <div class="label">Quantity</div>
              <div class="qty">
                <button data-minus>-</button>
                <div data-qty>1</div>
                <button data-plus>+</button>
              </div>
            </div>
          </div>

          <div class="actions">
            <button class="btn secondary" data-clear>Clear</button>
            <button class="btn primary" data-add>Add to cart</button>
          </div>

          <div class="message"></div>
        </div>
      ))}
    </section>

    <section class="contact">
      <h3>Contact</h3>
      <p><strong>CEO:</strong> Robert</p>
      <p>
        <strong>WhatsApp:</strong>
        <a href={WHATSAPP_LINK} target="_blank" rel="noopener">
          Chat on WhatsApp
        </a>
      </p>
    </section>
  </main>

  <!-- Floating WhatsApp button -->
  <a
    class="whatsapp-float"
    href={WHATSAPP_LINK}
    target="_blank"
    rel="noopener"
  >
    WhatsApp
  </a>

  <script>
    const CART_KEY = "amicbridge_cart_v1";

    function readCart() {
      return JSON.parse(localStorage.getItem(CART_KEY) || "[]");
    }

    function writeCart(cart) {
      localStorage.setItem(CART_KEY, JSON.stringify(cart));
      updateCartCount();
    }

    function updateCartCount() {
      document.getElementById("cartCount").textContent =
        readCart().reduce((s,i)=>s+i.qty,0);
    }

    document.querySelectorAll(".product").forEach(card => {
      let qty = 1;
      let size = null;
      let color = card.querySelector(".colors .active")?.dataset.color;

      card.querySelectorAll(".sizes .btn-option").forEach(b=>{
        b.onclick=()=>{ card.querySelectorAll(".sizes .btn-option").forEach(x=>x.classList.remove("active")); b.classList.add("active"); size=b.dataset.size; };
      });

      card.querySelectorAll(".colors .btn-option").forEach(b=>{
        b.onclick=()=>{ card.querySelectorAll(".colors .btn-option").forEach(x=>x.classList.remove("active")); b.classList.add("active"); color=b.dataset.color; };
      });

      card.querySelector("[data-plus]").onclick=()=>{ qty++; card.querySelector("[data-qty]").textContent=qty; };
      card.querySelector("[data-minus]").onclick=()=>{ qty=Math.max(1,qty-1); card.querySelector("[data-qty]").textContent=qty; };

      card.querySelector("[data-clear]").onclick=()=>{
        size=null; qty=1;
        card.querySelector("[data-qty]").textContent=1;
        card.querySelectorAll(".btn-option").forEach(b=>b.classList.remove("active"));
      };

      card.querySelector("[data-add]").onclick=()=>{
        if(!size || !color){
          card.querySelector(".message").textContent="Please select size and color";
          return;
        }
        const cart = readCart();
        cart.push({
          productId: card.dataset.id,
          name: card.querySelector("h2").textContent,
          price: Number(card.dataset.price),
          size, color, qty
        });
        writeCart(cart);
        card.querySelector(".message").textContent="Added to cart ✓";
      };
    });

    updateCartCount();
  </script>
</body>
</html>

